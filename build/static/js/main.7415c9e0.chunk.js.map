{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personObj","axios","post","then","res","data","get","id","delete","newObj","put","Notification","message","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBoottom","type","style","Filter","filter","handleChangeFilter","value","onChange","PersonForm","newName","newNumber","handleChangeName","handleChangeNumber","handleSubmit","onClick","Person","person","handleDelete","name","number","Persons","filteredPersons","length","map","App","useState","persons","setPersons","setFilteredPersons","setNewName","setNewNumber","setFilter","notificationMessage","setNotificationMessage","useEffect","p","startsWith","personService","returnedPersons","e","target","preventDefault","includes","window","confirm","returnedPerson","catch","err","response","error","setTimeout","newPerson","returnedObj","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7415c9e0.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(res =>res.data)\n}\n\nconst create = personObj => {\n    return axios.post(baseUrl, personObj).then(res => res.data )\n}\n\nconst _delete = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (id, newObj) =>{\n    return axios.put(`${baseUrl}/${id}`, newObj).then(res => res.data)\n} \n\nexport default {create, getAll, _delete, update}","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({message, type}) => {\n\n  const notificationStyle = {\n  color: 'green',\n  background: 'lightgrey',\n  fontSize: '20px',\n  borderStyle: 'solid',\n  borderRadius: '5px',\n  padding: '10px',\n  marginBoottom: '10px'\n}\n\n  if (type === 'err'){\n    notificationStyle.color = 'red'\n  }  \n\n  if (message === null){\n    return null\n  }\n\n    return (\n    <div style={notificationStyle}>\n      {message}\n    </div>\n    )\n\n}\n\nconst Filter = ({filter, handleChangeFilter}) => (\n    <p>Filter shown with <input value={filter} onChange={handleChangeFilter} /></p>\n)\n\nconst PersonForm = ({newName, newNumber, handleChangeName, handleChangeNumber, handleSubmit }) => (\n     <div>\n       <h2>Add a new</h2>\n      <form>\n        <div>\n          name: <input value={newName} onChange={handleChangeName} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleChangeNumber} />\n        </div>\n        <div>\n          <button type=\"submit\" onClick={handleSubmit}>add</button>\n        </div>\n      </form>\n    </div>\n    \n  )\n\n\nconst Person = ({person, handleDelete}) => (\n  <div>\n    {person.name}  {person.number}\n    <button onClick={handleDelete}  >Delete</button>\n  </div>\n\n)\n\nconst Persons = ({filteredPersons, handleDelete}) => (\n  <div>\n    <h2>Numbers</h2>\n  {filteredPersons.length === 0 ? \"...\" : filteredPersons.map(person => <Person person={person} handleDelete={handleDelete(person.id)} />) }\n  </div>\n)\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [filteredPersons, setFilteredPersons] = useState(persons)\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState([null, '']);\n\n  const handleChangeName = (e) => setNewName(e.target.value)\n  const handleChangeNumber = (e) => setNewNumber(e.target.value)\n  const handleChangeFilter = (e) => setFilter(e.target.value)\n  const handleSubmit = (e) => {\n      e.preventDefault()\n\n      if (! persons.map(p => p.name).includes(newName)){\n        const newPerson = {name : newName, number: newNumber}       \n        personService\n        .create(newPerson)\n        .then(returnedObj => {\n          if (returnedObj.error){\n            setNotificationMessage([`Error : ${returnedObj.error}`, 'err'])\n            setTimeout(() => setNotificationMessage([null, '']), 2000)\n          }else{\n          setPersons(persons.concat(returnedObj))\n          return newPerson.name\n          }\n        })\n        .then(name => {\n          if (name){\n            setNotificationMessage([`Added ${name}`, ''])\n            setTimeout(() => setNotificationMessage([null, '']), 2000)\n          }\n        })\n        .catch(err => {\n          setNotificationMessage([err.response.data.error, 'err'])\n          setTimeout(() => setNotificationMessage([null, '']), 2000)\n        })\n      }\n        else if ( window.confirm(`${newName} is already added to the phonebook, replace the older?`) ) {\n            const newObj = {...persons.filter(p => p.name === newName)[0], number : newNumber }\n            personService\n            .update(newObj.id, newObj)\n            .then(returnedPerson => setPersons(persons.map(p => p.id !== newObj.id ? p : returnedPerson))) \n            .catch(err => {\n              if (err.response.data.error){\n                setNotificationMessage([err.response.data.error,'err']) \n                setTimeout(() => {setNotificationMessage([null, ''])}, 2000)\n              }else{\n                setNotificationMessage([`Information of ${newName} has already been removed from server`, 'err']) \n                setTimeout(() => {setNotificationMessage([null, ''])}, 2000)\n              }\n              \n            })\n        }\n      \n      setNewName('')\n      setNewNumber('')\n  }\n\n  const handleDelete = (id) => (e) => {\n       personService._delete(id)\n      .then(() =>personService.getAll())\n      .then(returnedPersons => setPersons(returnedPersons))\n     }\n  \n\n  useEffect(() => setFilteredPersons(persons.filter(p => p.name.startsWith(filter) )), [persons,filter] )\n\n  useEffect( () => {\n    personService.getAll().then(returnedPersons => setPersons(returnedPersons)\n     )}, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage[0]} type={notificationMessage[1]} />\n      <Filter filter={filter} handleChangeFilter={handleChangeFilter} />\n      <PersonForm \n        newName={newName} \n        newNumber={newNumber} \n        handleChangeName={handleChangeName} \n        handleChangeNumber={handleChangeNumber} \n        handleSubmit={handleSubmit} \n        />\n        <Persons filteredPersons={filteredPersons} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(   <App />, document.getElementById('root')\n);\n\n;\n"],"sourceRoot":""}